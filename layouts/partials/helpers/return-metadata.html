{{- $ctx := . -}}
{{- $curPage := .page -}}
{{- $requestedData := .requestedData -}}

{{- $dataScratch := newScratch -}}
{{- $allData := (
    slice "name"
    "description"
    "dateCreated"
    "datePublished"
    "dateModified"
    "section"
    "wordCount"
    "images"
    "keywords"
    "siteName"
    "type"
    "url"
    "audio"
    "locale"
    "videos"
    "see_also"
) -}}

{{- $dataToGather := $requestedData | default $allData -}}

{{- range $dataToGather -}}
    {{- $gatherType := . -}}
    {{- with $curPage -}}
        {{- $data := (partial (printf "helpers/lib/metadata/gather-%s" $gatherType) .) -}}
        {{- $dataScratch.SetInMap "dataGathered" $gatherType $data -}}
    {{- end -}}
{{- end -}}
{{- $dataGathered := $dataScratch.Get "dataGathered" -}}
{{- return $dataGathered -}}